
# 🎤 ComfyUI-ASR (基于 Qwen3-Audio)

👉这是一个为 ComfyUI 设计的高精度、高性能语音识别插件，核心基于阿里通义千问 Qwen-Audio 系列模型。它不仅能进行普通的语音转文字，还解决了 ComfyUI 处理大量音频时的显存痛点，并提供了原生级的交互体验。


---

## ✨ 核心优势 (为什么选择它？)

### 1. 🚀 显存友好的批量处理 (Anti-OOM)

市面上许多 ASR 插件在处理大量音频文件时，会尝试一次性加载导致显存溢出（OOM）。

* **本插件特色**：内置智能**串行批处理**机制。无论你是一次性输入 10 个还是 10,000 个音频文件，它都会排队逐个处理，**显存占用极低且恒定**，绝不爆显存，自带进度条实时显示处理进度。

### 2. 🖱️ 原生级交互体验 (文件/文件夹选择器)

告别手动复制粘贴路径的痛苦！

* **本插件特色**：通过自定义的前端扩展，实现了**“浏览文件”**和**“浏览文件夹”**按钮。点击按钮即可弹出系统原生的文件选择框，选择后自动填入路径，且路径在刷新页面后自动记忆，不会丢失。

### 3. 🧠 支持 Prompt 提示词控制

不仅仅是“听写”，它还能“听懂”你的指令。

* **本插件特色**：支持输入 `提示词/Context`。
* **修正术语**：输入专业名词（如“ComfyUI”、“LoRA”），模型能更精准识别。
* **指令控制**：输入“Translate to English”，模型可在识别的同时直接输出英文翻译。
* **忽略杂音**：输入“忽略语气词”，输出更干净的文本。



### 4. 🌐 多源模型自动管理

* 支持 **ModelScope (魔搭)** 和 **HuggingFace** 双源下载。
* 国内用户默认使用 ModelScope，无需魔法即可高速下载模型。
* 支持自动下载 Qwen3-ASR 模型，开箱即用。

---

## 📦 包含节点

| 节点名称 | 功能描述 |
| --- | --- |
| **🎤 Qwen 语音识别 (ASR)** | 单条音频识别，支持 Prompt，输出纯文本。 |
| **🎤 Qwen 批量语音识别** | 批量处理音频列表，自动排队防爆显存，输出合并后的文本。 |

---

## 🔧 安装方法

### 方法一：使用 ComfyUI Manager (推荐)

1. 打开 ComfyUI Manager。
2. 选择 "Install via Git URL"。
3. 输入地址：`https://github.com/a63976659/ComfyUI-ASR`。
4. 点击 Install 并重启 ComfyUI。

### 方法二：手动安装 (Git Clone)

1. **进入插件目录**：
打开终端（CMD/PowerShell），进入你的 ComfyUI 插件目录：
```bash
cd ComfyUI/custom_nodes/

```


2. **克隆仓库**：
```bash
git clone https://github.com/a63976659/ComfyUI-ASR.git

```


3. **安装依赖**：
进入插件文件夹并安装依赖。
* **对于官方整合包用户** (使用 `python_embeded`)：
```bash
cd ComfyUI-ASR
..\..\..\python_embeded\python.exe -m pip install -r requirements.txt

```


* **对于系统 Python 用户**：
```bash
cd ComfyUI-ASR
pip install -r requirements.txt

```





### ⚠️ 环境提示 (必读)

* **FFmpeg**: 本插件依赖 `torchaudio` 处理音频。通常情况下安装依赖即可，但如果遇到音频加载错误，请确保你的系统安装了 **FFmpeg** 并添加到了环境变量中。
* **Qwen-ASR**: 首次运行时，插件会自动从 ModelScope 下载模型（约数 GB），请留意控制台进度。

---

## 🛠️ 使用示例

1. 添加节点 **“加载音频”** -> 点击 **“选择文件”** 选择你的素材。
2. 连接到 **“🎤 Qwen语音识别”** 节点。
3. (可选) 在 **“提示词”** 中输入 `转录为简体中文，忽略背景杂音`。
4. 点击 **执行**，查看控制台进度条，等待结果输出。


---

## 🔗 相关资源

- 🎥 **视频教程**：`https://www.bilibili.com/video/BV1ecMnzQEfc/`
- 💬 **讨论社区**：[QQ群202018000] 
- 📦 **模型数据库**：定期更新

---
### **支持开发者**
如果这个插件帮你节省了大量时间，欢迎：
- ⭐ **Star 项目**让更多人看到
- 🐛 **提交 Issue** 帮助改进
- 📖 **分享教程** 帮助其他用户
- ☕ **请作者喝咖啡**
**🔔 关注更新，获取最新功能**
---
**作者**：a63976659  
- [小红书：猪的飞行梦] 
- [哔哩哔哩主页：https://space.bilibili.com/2114638644]

**致谢**：感谢所有测试用户和贡献者！
如果你觉得插件还不错可以点个收藏。


请作者喝奶茶可以扫个码😀😀😀
养家版二维码❥(^_-)
![收款二维码](https://github.com/user-attachments/assets/687a3fc3-2511-47c7-bc71-1e06527dbe01)


---
